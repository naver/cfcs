{"version":3,"file":"cfcs.js","sources":["../src/core/utils.ts","../src/dom/utils.ts","../src/reactive/const.ts","../src/reactive/detectDependencies.ts","../src/reactive/Observer.ts","../src/reactive/ComputedObserver.ts","../src/reactive/decorators/Observe.ts","../src/reactive/decorators/ReactiveSubscribe.ts","../src/reactive/inline.ts","../src/reactive/utils.ts","../src/reactive/adaptReactive.ts","../src/reactive/decorators/Computed.ts","../src/index.ts","../src/index.umd.ts"],"sourcesContent":["/**\n * cfcs\n * Copyright (c) 2022-present NAVER Corp.\n * MIT license\n */\n\n\n/**\n * @hidden\n */\nexport function keys<T extends Record<string, any>>(obj: T): Array<keyof T> {\n  return Object.keys(obj);\n}\n\n/**\n * @hidden\n */\nexport function camelize(str: string) {\n  return str.replace(/[\\s-_]([a-z])/g, (all, letter) => letter.toUpperCase());\n}\n\n/**\n * @hidden\n */\nexport function isString(val: any): val is string {\n  return typeof val === \"string\";\n}\n\n/**\n * @hidden\n */\nexport function isObject(val: any): val is object {\n  return typeof val === \"object\";\n}\n\n/**\n * @hidden\n */\nexport function isFunction(val: any): val is Function {\n  return typeof val === \"function\";\n}\n","/**\n * cfcs\n * Copyright (c) 2022-present NAVER Corp.\n * MIT license\n */\nimport { isString, Ref } from \"../core\";\n\n/**\n * @hidden\n */\nexport function findTarget<Target extends Element = Element>(target: string | Target | Ref<Target> | null): Target | null {\n  let el!: Target;\n\n  if (!target) {\n    return null;\n  } if (isString(target)) {\n    el = document.querySelector<Target>(target)!;\n  } else if (target instanceof Element) {\n    el = target;\n  } else if (\"value\" in target || \"current\" in target) {\n    el = target.value! || target.current!;\n  }\n\n  return el;\n}\n\n/**\n * @description Sets the name of the class method to be exposed to the outside.\n * @category DOM\n * @return Property Decorator\n * @example\n * ```ts\n * import { withClassMethods } from \"@cfcs/core\";\n *\n * class YourFrameworkComponent {\n *   @withClassMethod(METHOD_NAMES)\n *   inst = new YourComponent();\n * }\n * ```\n */\nexport function withClassMethods(methods: readonly string[]) {\n  return function (prototype: any, memberName: string) {\n    methods.forEach((name: string) => {\n      if (name in prototype) {\n        return;\n      }\n      prototype[name] = function (...args) {\n        const result = this[memberName][name](...args);\n\n        // fix `this` type to return your own `class` instance to the instance using the decorator.\n        if (result === this[memberName]) {\n          return this;\n        } else {\n          return result;\n        }\n      };\n    });\n  };\n}\n","/**\n * cfcs\n * Copyright (c) 2022-present NAVER Corp.\n * MIT license\n */\nexport const OBSERVERS_PATH = \"__observers__\";\nexport const COMPUTED_PATH = \"__computed__\";\nexport const CFCS_DETECTED_DEPENDENCIES_VERSION = 1;\nexport const CFCS_DETECTED_DEPENDENCIES = \"__CFCS_DETECTED_DEPENDENCIES__\";\n","/**\n * cfcs\n * Copyright (c) 2022-present NAVER Corp.\n * MIT license\n */\nimport {\n  CFCS_DETECTED_DEPENDENCIES,\n  CFCS_DETECTED_DEPENDENCIES_VERSION,\n} from \"./const\";\nimport { Observer } from \"./Observer\";\n\nexport interface Detected {\n  host: Observer<any>;\n  observers: Array<Observer<any>>;\n  push(observer: Observer<any>): void;\n}\n\nexport function getDetectedStack(): Array<Detected> {\n  // Version issues do not occur when you access the native object in the global.\n  (Object as any)[CFCS_DETECTED_DEPENDENCIES] = (Object as any)[CFCS_DETECTED_DEPENDENCIES] || {};\n  const versionList = (Object as any)[CFCS_DETECTED_DEPENDENCIES];\n\n  versionList[CFCS_DETECTED_DEPENDENCIES_VERSION] = versionList[CFCS_DETECTED_DEPENDENCIES_VERSION] || [];\n\n  return versionList[CFCS_DETECTED_DEPENDENCIES_VERSION];\n}\n\nexport function getCurrentDetected(): Detected | undefined {\n  const stack = getDetectedStack();\n\n  return stack[stack.length - 1];\n}\n\nexport function detectDependencies(host: Observer<any>) {\n  const stack = getDetectedStack();\n  const observers: Array<Observer> = [];\n  const detected: Detected = {\n    host,\n    observers,\n    push(observer: Observer<any>) {\n      if (host !== observer && observers.indexOf(observer) === -1) {\n        observers.push(observer);\n      }\n    },\n  };\n\n  stack.push(detected);\n  return detected;\n}\n\nexport function endDetectDependencies() {\n  const stack = getDetectedStack();\n\n  return stack.pop();\n}\n","/**\n * cfcs\n * Copyright (c) 2022-present NAVER Corp.\n * MIT license\n */\nimport Component from \"@egjs/component\";\nimport { getCurrentDetected } from \"./detectDependencies\";\n\ninterface EmitterEvents<Value> {\n  update: (value: Value, prevValue: Value) => void;\n}\n\n/**\n * Creates a mutable ref object. You can access the `.current` value and detect the value change through `.subscribe`.\n * @category Reactive\n * @see observe\n */\nexport class Observer<Value = any> {\n  protected _current: Value;\n  protected _emitter = new Component<EmitterEvents<Value>>();\n  /**\n   *\n   */\n  constructor(value?: Value) {\n    this._current = value as any;\n  }\n  /**\n   * return the current value.\n   */\n  public get current(): Value {\n    const currentDetected = getCurrentDetected();\n\n    currentDetected?.push(this);\n    return this._current as Value;\n  }\n  public set current(value: Value) {\n    this._setCurrent(value);\n  }\n  /**\n   * When the current value changes, the callback function is called.\n   */\n  public subscribe(callback: (value: Value, prevValue: Value) => void) {\n    this.current;\n    this._emitter.on(\"update\", callback);\n    return this;\n  }\n  /**\n   * Cancel the registered subscription through callback.\n   */\n  public unsubscribe(callback?: (value: Value, prevValue: Value) => void) {\n    this._emitter.off(\"update\", callback);\n    return this;\n  }\n  protected _setCurrent(value: Value) {\n    const prevValue = this._current;\n    const isUpdate = value !== prevValue;\n\n    this._current = value;\n\n    if (isUpdate) {\n      this._emitter.trigger(\"update\", value, prevValue);\n    }\n  }\n  /**\n   * @hidden\n   */\n  public toString() {\n    return `${this.current}`;\n  }\n  /**\n   * @hidden\n   */\n  public valueOf() {\n    return this.current;\n  }\n}\n","/**\n * cfcs\n * Copyright (c) 2022-present NAVER Corp.\n * MIT license\n */\nimport { detectDependencies, endDetectDependencies } from \"./detectDependencies\";\nimport { Observer } from \"./Observer\";\n\n/**\n * @category Reactive\n * @hidden\n */\nexport class ComputedObserver<T> extends Observer<T> {\n  private _registered: Array<Observer<any>> = [];\n  /**\n   * @description Creates a new computed observer from the values of other observers.\n   * It is read-only and if you change the value of the observer used inside the callback, its value will be automatically updated.\n   * @param _computedCallback A function for observers to be computed.\n   */\n  constructor(private _computedCallback: () => T) {\n    super();\n\n    this._current = this.current;\n  }\n\n  get current() {\n    detectDependencies(this);\n    const value = this._computedCallback();\n    const results = endDetectDependencies()!;\n\n    this._registered.forEach(observer => {\n      observer.unsubscribe(this._onCheckUpdate);\n    });\n    results.observers.forEach(observer => {\n      observer.subscribe(this._onCheckUpdate);\n    });\n    this._registered = results.observers;\n\n    return value;\n  }\n\n  private _onCheckUpdate = () => {\n    this._setCurrent(this.current);\n  }\n}\n","/**\n * cfcs\n * Copyright (c) 2022-present NAVER Corp.\n * MIT license\n */\nimport { getObserver } from \"../utils\";\n\n\nfunction injectObserve(prototype: any, memberName: string, publicName = memberName) {\n  const nextAttributes: PropertyDescriptor = {\n    configurable: true,\n    get: function () {\n      return getObserver(this, publicName).current;\n    },\n    set: function (value: any) {\n      getObserver(this, publicName, value).current = value;\n    },\n  };\n  Object.defineProperty(prototype, memberName, nextAttributes);\n  if (publicName !== memberName) {\n    Object.defineProperty(prototype, publicName, {\n      configurable: true,\n      get: function () {\n        return getObserver(this, publicName).current;\n      },\n    });\n  }\n}\n\nexport function Observe(protoype: any, memberName: string): void;\nexport function Observe(name?: string): (protoype: any, memberName: string) => void;\n/**\n * @description `Observe` is a property decorator and converts the property into a `reactive state`. You can detect its status through `.subscribe`.\n * @category Reactive-Decorator\n * @see ReactiveSubscribe\n * @example\n* ```ts\nimport { ReactiveSubscribe, Observe } from \"@cfcs/core\";\n\n@ReactiveSubscribe\nclass Component {\n  // The public name and state name are the same.\n  @Observe value1 = 1;\n  // If you want to set public name and private properties separately\n  @Observe(\"value2\") _value2 = 1;\n\n  constructor() {\n    requestAnimationFrame(() => {\n      this.value1 = 2;\n    });\n  }\n}\ninterface C\n```\n */\nexport function Observe(...args: any[]) {\n  if (args.length > 1) {\n    return injectObserve(args[0], args[1]);\n  }\n\n  return (prototype: any, memberName: string) => injectObserve(prototype, memberName, args[0]);\n}\n\n\nexport function Reactive(protoype: any, memberName: string): void;\nexport function Reactive(name?: string): (protoype: any, memberName: string) => void;\n/**\n * @hidden\n */\nexport function Reactive(...args: any[]) {\n  return Observe(...args);\n}\n\n","/**\n * cfcs\n * Copyright (c) 2022-present NAVER Corp.\n * MIT license\n */\nimport { keys } from \"../../core\";\nimport { getObserver, getObservers } from \"../utils\";\n\n/**\n * @hidden\n */\nexport function injectReactiveSubscribe(object: Record<string, any>,) {\n  object[\"subscribe\"] = function (name: string, callback: (value: any) => void) {\n    this[name];\n    getObserver(this, name).subscribe(callback);\n  };\n  object[\"unsubscribe\"] = function (name?: string, callback?: (value: any) => void) {\n    if (!name) {\n      keys(getObservers(this)).forEach((observerName) => {\n        this.unsubscribe(observerName);\n      });\n      return;\n    }\n    if (!(name in this)) {\n      return;\n    }\n    getObserver(this, name).unsubscribe(callback);\n  };\n}\n\n\n/**\n * @description `ReactiveSubscribe` is a class decorator and adds `.subscribe` and `.unsubscribe` methods.\n * @category Reactive-Decorator\n * @see Observe\n * @example\n * ```ts\nimport { ReactiveSubscribe, Observe } from \"@cfcs/core\";\n\n@ReactiveSubscribe\nclass Component {\n  @Observe value1 = 1;\n\n  constructor() {\n    requestAnimationFrame(() => {\n      this.value1 = 2;\n    });\n  }\n}\n\ninterface Component extends ReactiveSubscribe<{\n  value1: number;\n  value2: number;\n}> {}\n\nconst component = new Component();\n\n// 1\nconsole.log(component.value1);\n\ncomponent.subscribe(\"value1\", nextValue => {\n  // When the change event occurs => (2, 2)\n  console.log(nextValue, component.value2);\n});\n```\n */\nexport function ReactiveSubscribe(Constructor: any) {\n  const prototype = Constructor.prototype;\n\n  injectReactiveSubscribe(prototype);\n}\n\n/**\n * `ReactiveSubscribe` is a class decorator and adds `.subscribe` and `.unsubscribe` methods.\n * @category Reactive\n */\nexport interface ReactiveSubscribe<State extends Record<string, any>> {\n  /**\n   * When the value of the property changes, the callback function is called.\n   */\n  subscribe<Name extends keyof State = keyof State>(\n    name: Name, callback: (value: State[Name]) => void): void;\n  /**\n   * Unregister the callback function corresponding to the property.\n   */\n  unsubscribe<Name extends keyof State = keyof State>(\n    name?: Name, callback?: (value: State[Name]) => void): void;\n}\n","/**\n * cfcs\n * Copyright (c) 2022-present NAVER Corp.\n * MIT license\n */\nimport { ComputedObserver } from \"./ComputedObserver\";\nimport { Observer } from \"./Observer\";\nimport { ExtractNever, isFunction, keys } from \"../core\";\nimport { Observe } from \"./decorators/Observe\";\nimport { injectReactiveSubscribe, ReactiveSubscribe } from \"./decorators/ReactiveSubscribe\";\nimport { defineObservers, isObserver, setObserver } from \"./utils\";\n\n\ntype ConvertValue<Object extends Record<string, any>> = {\n  [Key in keyof Object]: Object[Key] extends Observer<infer Type> ? Type : Object[Key];\n}\n\ntype PickObverser<Object extends Record<string, any>> = ExtractNever<{\n  [Key in keyof Object]: Object[Key] extends Observer<infer Type> ? Type : never;\n}>;\n\n/**\n * @typedef\n * @category Reactive\n */\nexport type ParitalReactiveObject<Object extends Record<string, any>>\n  = ConvertValue<Object> & ReactiveSubscribe<PickObverser<Object>>;\n\n\n/**\n * Result type of `reactive` function call\n * @category Reactive\n * @see reactive\n * @example\n *  ```js\n * import { reactive } from \"@cfcs/core\";\n *\n * // define reactive state\n * const obj = reactive({\n *   value1: 1,\n *   value2: 2,\n * });\n * ```\n */\nexport type ReactiveObject<Object extends Record<string, any>>\n= Object & ReactiveSubscribe<Object>;\n\nfunction makeReactiveObject<Object extends Record<string, any>>(\n  setup: Readonly<Object> | (() => Readonly<Object>),\n  all?: boolean,\n): ParitalReactiveObject<Object> {\n  const result = isFunction(setup) ? setup() : setup;\n  const reactiveObject: Record<string, any> = {};\n\n  defineObservers(reactiveObject);\n  keys(result).forEach((name: any) => {\n    const value = result[name];\n\n    if (isObserver(value)) {\n      setObserver(reactiveObject, name, value);\n    } else {\n      setObserver(reactiveObject, name, observe(value));\n    }\n    Observe(name)(reactiveObject, name);\n  });\n\n  injectReactiveSubscribe(reactiveObject);\n  return reactiveObject as ParitalReactiveObject<Object>;\n}\n\n/**\n * @description Make the return value of the corresponding object or function a reactive object.\n * @category Reactive\n * @param setup - The target object or function to which reactive is applied\n * @returns Makes all values into reactive objects.\n * @example\n * ```ts\n * import { reactive } from \"@cfcs/core\";\n *\n * const obj = reactive({\n *  value1: 1,\n *  value2: 2,\n * });\n *\n * obj.subscribe(\"value1\", value1 => {\n *   console.log(value1);\n * });\n * obj.value1 = 2;\n * ```\n */\nexport function reactive<Object extends Record<string, any>>(\n  setup: Readonly<Object> | (() => Readonly<Object>),\n): ReactiveObject<Object> {\n  return makeReactiveObject(setup, true) as ReactiveObject<Object>;\n}\n\n/**\n * @description Make the return value of the corresponding object or function a reactive object.\n * @category Reactive\n * @param setup - The target object or function to which reactive is applied\n * @returns Only the values to which observer is applied are objects to which reactive is applied.\n * @example\n * ```ts\n * import { partialReactive, observe } from \"@cfcs/core\";\n *\n * const value1 = observe(1);\n * const value2 = observe(2);\n * const obj = partialReactive({\n *  value1,\n *  value2,\n * });\n *\n * obj.subscribe(\"value1\", value1 => {\n *   console.log(value1);\n * });\n * value1.current = 2;\n * ```\n */\nexport function partialReactive<Object extends Record<string, any>>(\n  setup: Readonly<Object> | (() => Readonly<Object>),\n): ParitalReactiveObject<Object> {\n  return makeReactiveObject(setup);\n}\n\n/**\n * @description Creates a mutable ref object. You can access the `.current` value and detect the value change through `.subscribe`.\n * @category Reactive\n * @example\n * ```ts\n * import { observe } from \"@cfcs/core\";\n *\n * const ob1 = observe(1);\n *\n * ob1.subscribe(nextValue => {\n *   console.log(nextValue);\n * });\n *\n * ob1.current = 2;\n * ```\n */\nexport function observe<Type>(defaultValue?: Type): Observer<Type> {\n  return new Observer<Type>(defaultValue);\n}\n\n/**\n * @hidden\n */\nexport function computed<Type>(computedCallback: () => Type) {\n  return new ComputedObserver(computedCallback);\n}\n","/**\n * cfcs\n * Copyright (c) 2022-present NAVER Corp.\n * MIT license\n */\nimport { COMPUTED_PATH, OBSERVERS_PATH } from \"./const\";\nimport { Observer } from \"./Observer\";\nimport { ReactiveMethods } from \"./types\";\nimport { isObject, Ref } from \"../core\";\nimport { observe } from \"./inline\";\nimport { ReactiveSubscribe } from \"./decorators/ReactiveSubscribe\";\n\n/**\n * @hidden\n */\nexport function withReactiveMethods<\n  Instance,\n  Names extends keyof Partial<Instance>,\n  Return extends ReactiveMethods<Instance, Names>\n>(ref: Ref<Instance>, methods?: readonly Names[]): Return {\n  const obj: Record<any, any> = {};\n\n  if (!methods) {\n    return obj;\n  }\n\n  methods.forEach(name => {\n    obj[name] = function (...args: any[]) {\n      const current: any = ref.current || ref.value;\n\n      return current[name](...args);\n    };\n  });\n  return obj as Return;\n}\n\n/**\n * @hidden\n */\nexport function defineObservers(instance: any) {\n  const observers: Record<string, Observer<any>> = {};\n\n  Object.defineProperty(instance, OBSERVERS_PATH, {\n    get() {\n      return observers;\n    },\n  });\n\n  return observers;\n}\n\n/**\n * @hidden\n */\nexport function getObservers(instance: any, isComputed?: boolean): Record<string, Observer<any>> {\n  if (!instance[OBSERVERS_PATH]) {\n    defineObservers(instance);\n  }\n  const observers = instance[OBSERVERS_PATH];\n\n  if (!isComputed) {\n    const computedList = instance?.constructor?.prototype?.[COMPUTED_PATH];\n\n    if (computedList) {\n      computedList.forEach(name => {\n        if (!(name in observers) && name in instance) {\n          instance[name];\n        }\n      });\n    }\n  }\n  return observers;\n}\n\n/**\n * @hidden\n */\nexport function getObserver(instance: any, name: string, defaultValue?: any): Observer<any> {\n  const observers = getObservers(instance);\n\n  if (!observers[name]) {\n    observers[name] = observe(defaultValue);\n  }\n  return observers[name];\n}\n\n/**\n * @hidden\n */\nexport function setObserver(instance: any, name: string, observer: Observer<any>) {\n  const observers = getObservers(instance);\n\n  observers[name] = observer;\n}\n\n/**\n * @description Whether that object is an observer instance\n * @category Reactive\n */\nexport function isObserver(val: any): val is Observer {\n  return val && isObject(val) && \"current\" in val && \"subscribe\" in val && \"unsubscribe\" in val;\n}\n\n/**\n * @description Whether the object is reactive\n * @category Reactive\n */\nexport function isReactive(val: any): val is ReactiveSubscribe<any> {\n  return val && !isObserver(val) && \"subscribe\" in val && \"unsubscribe\" in val;\n}\n","/**\n * cfcs\n * Copyright (c) 2022-present NAVER Corp.\n * MIT license\n */\nimport { isFunction, keys } from \"../core\";\nimport { Ref } from \"../core/types\";\nimport { ReactiveAdapter, ReactiveAdapterParam } from \"./ReactiveAdapter\";\nimport { ReactiveSubscribe } from \"./decorators/ReactiveSubscribe\";\nimport { ReactiveEventCallback, ReactiveState } from \"./types\";\nimport { getObservers, withReactiveMethods } from \"./utils\";\nimport Component from \"@egjs/component\";\nimport { EventKey, EventTriggerParams } from \"@egjs/component/declaration/types\";\n\n/**\n * @category Reactive\n * @hidden\n */\nexport function adaptReactive<\n  Instance extends ReactiveSubscribe<Record<string, any>>,\n  State extends Record<string, any> = ReactiveState<Instance>,\n  Methods extends keyof Partial<Instance> = never,\n  Props = any,\n  Events extends Record<string, any> = {},\n>(adapter: ReactiveAdapterParam<Instance, State, Methods, Props, Events>, props?: () => Props) {\n  const objectAdapter: ReactiveAdapter<Instance, State, Methods, Props, Events> = isFunction(adapter) ? {\n    setup: adapter,\n  } : adapter;\n\n  function getProps(): Props {\n    return props?.() ?? objectAdapter.props?.() ?? objectAdapter.data?.() ?? {} as Props;\n  }\n\n  const eventEmitter = new Component<Events>();\n  const mountedHooks: Array<(props: Props, instance?: Instance | null) => Instance | void> = [];\n  const initHooks: Array<(instance: Instance, props: Props) => void> = [];\n  const destroyHooks: Array<(instance: Instance, props: Props) => void> = [];\n  const onHooks: Array<<EventName extends EventKey<Events>>(instance: Instance, eventName: EventName, listener: ReactiveEventCallback<Events, EventName>) => void | (() => void)> = [];\n  const instanceRef: Ref<Instance> = { current: null };\n  let offHooksList: Array<Array<() => void>> = [];\n  let initialState: State | null = null;\n  let eventNames: readonly (keyof Events)[] = [];\n  let methodNames: readonly Methods[] = [];\n\n\n  const onMounted = (callback: (props: Props, instance?: Instance | null) => Instance | void) => {\n    mountedHooks.push(callback);\n  };\n  const onInit = (callback: (instance: Instance, props: Props) => void) => {\n    initHooks.push(callback);\n  };\n  const onDestroy = (callback: (instance: Instance, props: Props) => void): void => {\n    destroyHooks.push(callback)\n  };\n  const on = (callback: <EventName extends EventKey<Events>>(instance: Instance, eventName: EventName, listener: ReactiveEventCallback<Events, EventName>) => void | (() => void)) => {\n    onHooks.push(callback);\n  };\n  const emit = <EventName extends EventKey<Events>>(eventName: EventName, ...params: EventTriggerParams<Events, EventName>) => {\n    eventEmitter.trigger(eventName, ...params);\n  };\n\n  const setInitialState = (state: State) => {\n    initialState = state;\n  };\n  const setEvents = (events: readonly (keyof Events)[]) => {\n    eventNames = events;\n  }\n  const setMethods = (methods: readonly Methods[]) => {\n    methodNames = methods;\n  }\n\n  if (objectAdapter.setup) {\n    instanceRef.current = objectAdapter.setup({\n      getProps,\n      setInitialState,\n      setEvents,\n      setMethods,\n      onMounted,\n      onDestroy,\n      onInit,\n      emit,\n      on,\n    }) || null;\n  }\n\n  if (objectAdapter.created) {\n    instanceRef.current = objectAdapter.created(getProps()) || null;\n  }\n\n  if (objectAdapter.events) {\n    setEvents(objectAdapter.events);\n  }\n  if (objectAdapter.state) {\n    setInitialState(objectAdapter.state);\n  }\n  if (objectAdapter.methods) {\n    setMethods(objectAdapter.methods);\n  }\n  if (objectAdapter.mounted) {\n    onMounted(objectAdapter.mounted);\n  }\n  if (objectAdapter.destroy) {\n    destroyHooks.push(objectAdapter.destroy);\n  }\n  if (objectAdapter.init) {\n    initHooks.push(objectAdapter.init);\n  }\n  if (objectAdapter.on) {\n    onHooks.push((instance, eventName, listener) => {\n      const off = objectAdapter.on!(instance, eventName, listener);\n\n      return () => {\n        off && off();\n        objectAdapter.off?.(instance, eventName, listener);\n      };\n    });\n  }\n\n  return {\n    events: () => eventNames,\n    state(): State {\n      const inst = instanceRef.current;\n\n      if (initialState) {\n        return initialState;\n      }\n      if (inst) {\n        const observers = getObservers(inst);\n\n        setInitialState(keys(observers).reduce((prev, cur) => {\n          prev[cur] = observers[cur].current;\n          return prev;\n        }, {} as any));\n      }\n      return initialState || {} as State;\n    },\n    instance() {\n      return instanceRef.current;\n    },\n    mounted(): void {\n      const props = getProps();\n\n      mountedHooks.forEach(hook => {\n        instanceRef.current = hook(props, instanceRef.current) || instanceRef.current;\n      });\n\n    },\n    init(): void {\n      // on events\n      const instance = instanceRef.current!;\n      const props = getProps();\n\n      offHooksList = (eventNames as string[]).map(eventName => {\n        const listener = (...params: any[]) => {\n          (eventEmitter as any).trigger(eventName, ...params);\n        };\n\n        const instance = instanceRef.current!;\n\n        return onHooks.map(hook => hook(instance, eventName, listener as any)).filter(Boolean) as Array<() => void>;\n      });\n\n      // init\n      initHooks.forEach(hook => {\n        hook(instance, props);\n      });\n    },\n    destroy(): void {\n      // off events\n      offHooksList.forEach(offHooks => {\n        offHooks.forEach(hook => {\n          hook();\n        });\n      });\n\n      // destroy\n      eventEmitter.off();\n      const instance = instanceRef.current!;\n      const props = getProps();\n\n      destroyHooks.forEach(hook => {\n        hook(instance, props);\n      });\n    },\n    methods() {\n      return withReactiveMethods<any, any, any>(instanceRef, methodNames);\n    },\n    on(eventName: string, listener: ReactiveEventCallback<any, any>) {\n      eventEmitter.on(eventName, listener);\n    },\n    off(eventName: string, listener: ReactiveEventCallback<any, any>) {\n      eventEmitter.off(eventName, listener);\n    },\n  };\n}\n","/**\n * cfcs\n * Copyright (c) 2022-present NAVER Corp.\n * MIT license\n */\nimport { COMPUTED_PATH } from \"../const\";\nimport { computed } from \"../inline\";\nimport { getObserver, getObservers } from \"../utils\";\n\n\n/**\n * @description `Computed` is a property decorator.\n * Changes in computed state values are also recognized according to changes in observers used within the getter function.\n * You can detect its status through `.subscribe`.\n * @hidden\n * @category Reactive-Decorator\n * @see ReactiveSubscribe\n * @example\n * ```ts\nconst ob1 = observe(0);\nconst ob2 = observe(1);\n\n// When\n@ReactiveSubscribe\nclass TestComputed {\n  @Computed\n  get ob3() {\n    return ob1.current + ob2.current;\n  }\n}\nconst inst = new TestComputed();\n\ninst.subscribe(\"ob3\", ob3 => {\n  console.log(ob3);\n});\n\nob1.current = 1;\n```\n */\nexport function Computed(prototype: any, memberName: string, attributes: PropertyDescriptor): PropertyDescriptor {\n  const get = attributes.get!;\n\n  function getComputed() {\n    const observers = getObservers(this, true);\n\n    if (!(memberName in observers)) {\n      observers[memberName] = computed(get.bind(this));\n    }\n    return getObserver(this, memberName).current;\n  }\n  const nextAttributes: PropertyDescriptor = {\n    configurable: true,\n    get: getComputed,\n  }\n\n  prototype[COMPUTED_PATH] ||= [];\n  const computedList = prototype[COMPUTED_PATH];\n\n  if (computedList.indexOf(memberName) === -1) {\n    computedList.push(memberName);\n  }\n  Object.defineProperty(prototype, memberName, nextAttributes);\n\n  return nextAttributes;\n}\n","/**\n * cfcs\n * Copyright (c) 2022-present NAVER Corp.\n * MIT license\n */\nexport * from \"./core\";\nexport * from \"./dom\";\nexport * from \"./reactive\";\n","/**\n * cfcs\n * Copyright (c) 2022-present NAVER Corp.\n * MIT license\n */\nimport * as modules from \"./index\";\n\n// co\n// for (const name in modules) {\n//     (cfcs as any)[name] = (modules as any)[name];\n// }\n\nexport default modules;\n"],"names":["keys","obj","Object","camelize","str","replace","all","letter","toUpperCase","isString","val","isObject","isFunction","findTarget","target","el","document","querySelector","Element","value","current","withClassMethods","methods","prototype","memberName","forEach","name","args","_i","arguments","length","result","_a","apply","OBSERVERS_PATH","COMPUTED_PATH","CFCS_DETECTED_DEPENDENCIES_VERSION","CFCS_DETECTED_DEPENDENCIES","getDetectedStack","versionList","getCurrentDetected","stack","detectDependencies","host","observers","detected","push","observer","indexOf","endDetectDependencies","pop","Observer","_emitter","Component","_current","defineProperty","get","currentDetected","set","_setCurrent","subscribe","callback","on","unsubscribe","off","prevValue","isUpdate","trigger","toString","concat","valueOf","ComputedObserver","_super","__extends","_computedCallback","_this","_registered","_onCheckUpdate","results","injectObserve","publicName","nextAttributes","configurable","getObserver","Observe","Reactive","injectReactiveSubscribe","object","getObservers","observerName","ReactiveSubscribe","Constructor","makeReactiveObject","setup","reactiveObject","defineObservers","isObserver","setObserver","observe","reactive","partialReactive","defaultValue","computed","computedCallback","withReactiveMethods","ref","instance","isComputed","computedList","_b","constructor","isReactive","adaptReactive","adapter","props","objectAdapter","getProps","_e","call","_c","_d","data","eventEmitter","mountedHooks","initHooks","destroyHooks","onHooks","instanceRef","offHooksList","initialState","eventNames","methodNames","onMounted","onInit","onDestroy","emit","eventName","params","setInitialState","state","setEvents","events","setMethods","created","mounted","destroy","init","listener","inst","observers_1","reduce","prev","cur","hook","map","__spreadArray","filter","Boolean","offHooks","Computed","attributes","getComputed","bind"],"mappings":";;;;;;;;;;;;;;EAAA;;;;EAIG;;EAGH;;EAEG;EACG,SAAUA,IAAV,CAA8CC,GAA9C,EAAoD;EACxD,EAAA,OAAOC,MAAM,CAACF,IAAP,CAAYC,GAAZ,CAAP,CAAA;EACD,CAAA;EAED;;EAEG;;EACG,SAAUE,QAAV,CAAmBC,GAAnB,EAA8B;IAClC,OAAOA,GAAG,CAACC,OAAJ,CAAY,gBAAZ,EAA8B,UAACC,GAAD,EAAMC,MAAN,EAAiB;MAAA,OAAAA,MAAM,CAACC,WAAP,EAAA,CAAA;EAAoB,GAAnE,CAAP,CAAA;EACD,CAAA;EAED;;EAEG;;EACG,SAAUC,QAAV,CAAmBC,GAAnB,EAA2B;IAC/B,OAAO,OAAOA,GAAP,KAAe,QAAtB,CAAA;EACD,CAAA;EAED;;EAEG;;EACG,SAAUC,QAAV,CAAmBD,GAAnB,EAA2B;IAC/B,OAAO,OAAOA,GAAP,KAAe,QAAtB,CAAA;EACD,CAAA;EAED;;EAEG;;EACG,SAAUE,UAAV,CAAqBF,GAArB,EAA6B;IACjC,OAAO,OAAOA,GAAP,KAAe,UAAtB,CAAA;EACD;;ECxCD;;;;EAIG;EAGH;;EAEG;;EACG,SAAUG,UAAV,CAAuDC,MAAvD,EAAmG;EACvG,EAAA,IAAIC,EAAJ,CAAA;;IAEA,IAAI,CAACD,MAAL,EAAa;EACX,IAAA,OAAO,IAAP,CAAA;EACD,GAAA;;EAAC,EAAA,IAAIL,QAAQ,CAACK,MAAD,CAAZ,EAAsB;EACtBC,IAAAA,EAAE,GAAGC,QAAQ,CAACC,aAAT,CAA+BH,MAA/B,CAAL,CAAA;EACD,GAFC,MAEK,IAAIA,MAAM,YAAYI,OAAtB,EAA+B;EACpCH,IAAAA,EAAE,GAAGD,MAAL,CAAA;EACD,GAFM,MAEA,IAAI,OAAA,IAAWA,MAAX,IAAqB,SAAA,IAAaA,MAAtC,EAA8C;EACnDC,IAAAA,EAAE,GAAGD,MAAM,CAACK,KAAP,IAAiBL,MAAM,CAACM,OAA7B,CAAA;EACD,GAAA;;EAED,EAAA,OAAOL,EAAP,CAAA;EACD,CAAA;EAED;;;;;;;;;;;;;EAaG;;EACG,SAAUM,gBAAV,CAA2BC,OAA3B,EAAqD;EACzD,EAAA,OAAO,UAAUC,SAAV,EAA0BC,UAA1B,EAA4C;EACjDF,IAAAA,OAAO,CAACG,OAAR,CAAgB,UAACC,IAAD,EAAa;QAC3B,IAAIA,IAAI,IAAIH,SAAZ,EAAuB;EACrB,QAAA,OAAA;EACD,OAAA;;EACDA,MAAAA,SAAS,CAACG,IAAD,CAAT,GAAkB,YAAA;;;UAAU,IAAOC,IAAA,GAAA,EAAP,CAAA;;eAAA,IAAOC,EAAA,GAAA,GAAPA,EAAO,GAAAC,SAAA,CAAAC,QAAPF,EAAO,IAAA;EAAPD,UAAAA,IAAO,CAAAC,EAAA,CAAP,GAAOC,SAAA,CAAAD,EAAA,CAAP,CAAA;;;EAC1B,QAAA,IAAMG,MAAM,GAAG,CAAAC,EAAA,GAAA,IAAA,CAAKR,UAAL,CAAA,EAAiBE,IAAjB,CAAA,CAA0BO,KAA1B,CAA0BD,EAA1B,EAA0BL,IAA1B,CAAf,CADgB;;;EAIhB,QAAA,IAAII,MAAM,KAAK,IAAKP,CAAAA,UAAL,CAAf,EAAiC;EAC/B,UAAA,OAAO,IAAP,CAAA;EACD,SAFD,MAEO;EACL,UAAA,OAAOO,MAAP,CAAA;EACD,SAAA;SARH,CAAA;OAJF,CAAA,CAAA;KADF,CAAA;EAiBD;;EC1DD;;;;EAIG;EACI,IAAMG,cAAc,GAAG,eAAvB,CAAA;EACA,IAAMC,aAAa,GAAG,cAAtB,CAAA;EACA,IAAMC,kCAAkC,GAAG,CAA3C,CAAA;EACA,IAAMC,0BAA0B,GAAG,gCAAnC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ECRP;;;;EAIG;WAaaC,mBAAgB;EAC9B;IACCpC,MAAc,CAACmC,0BAAD,CAAd,GAA8CnC,MAAc,CAACmC,0BAAD,CAAd,IAA8C,EAA5F,CAAA;EACD,EAAA,IAAME,WAAW,GAAIrC,MAAc,CAACmC,0BAAD,CAAnC,CAAA;IAEAE,WAAW,CAACH,kCAAD,CAAX,GAAkDG,WAAW,CAACH,kCAAD,CAAX,IAAmD,EAArG,CAAA;IAEA,OAAOG,WAAW,CAACH,kCAAD,CAAlB,CAAA;EACD,CAAA;WAEeI,qBAAkB;IAChC,IAAMC,KAAK,GAAGH,gBAAgB,EAA9B,CAAA;EAEA,EAAA,OAAOG,KAAK,CAACA,KAAK,CAACX,MAAN,GAAe,CAAhB,CAAZ,CAAA;EACD,CAAA;EAEK,SAAUY,kBAAV,CAA6BC,IAA7B,EAAgD;IACpD,IAAMF,KAAK,GAAGH,gBAAgB,EAA9B,CAAA;IACA,IAAMM,SAAS,GAAoB,EAAnC,CAAA;EACA,EAAA,IAAMC,QAAQ,GAAa;EACzBF,IAAAA,IAAI,EAAAA,IADqB;EAEzBC,IAAAA,SAAS,EAAAA,SAFgB;MAGzBE,IAAI,EAAJ,UAAKC,QAAL,EAA4B;EAC1B,MAAA,IAAIJ,IAAI,KAAKI,QAAT,IAAqBH,SAAS,CAACI,OAAV,CAAkBD,QAAlB,CAAA,KAAgC,CAAC,CAA1D,EAA6D;UAC3DH,SAAS,CAACE,IAAV,CAAeC,QAAf,CAAA,CAAA;EACD,OAAA;EACF,KAAA;KAPH,CAAA;IAUAN,KAAK,CAACK,IAAN,CAAWD,QAAX,CAAA,CAAA;EACA,EAAA,OAAOA,QAAP,CAAA;EACD,CAAA;WAEeI,wBAAqB;IACnC,IAAMR,KAAK,GAAGH,gBAAgB,EAA9B,CAAA;IAEA,OAAOG,KAAK,CAACS,GAAN,EAAP,CAAA;EACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ECtDD;;;;EAIG;EAQH;;;;EAIG;;EACH,IAAAC,QAAA;EAAA;EAAA,YAAA;EAGE;;EAEG;IACH,SAAAA,QAAA,CAAYhC,KAAZ,EAAyB;EAJf,IAAA,IAAA,CAAAiC,QAAA,GAAW,IAAIC,SAAJ,EAAX,CAAA;MAKR,IAAKC,CAAAA,QAAL,GAAgBnC,KAAhB,CAAA;EACD,GAAA;;EARH,EAAA,IAAA,OAAA,GAAA,QAAA,CAAA,SAAA,CAAA;EAYEjB,EAAAA,MAAA,CAAAqD,cAAA,CAAkB,OAAA,EAAA,SAAlB,EAAkB;EAHlB;;EAEG;EACHC,IAAAA,GAAA,EAAA,YAAA;QACE,IAAMC,eAAe,GAAGjB,kBAAkB,EAA1C,CAAA;EAEAiB,MAAAA,eAAe,KAAA,IAAf,IAAAA,eAAe,KAAf,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,eAAe,CAAEX,IAAjB,CAAsB,IAAtB,CAAA,CAAA;EACA,MAAA,OAAO,KAAKQ,QAAZ,CAAA;OAJgB;MAMlBI,GAAA,EAAA,UAAmBvC,KAAnB,EAA+B;QAC7B,IAAKwC,CAAAA,WAAL,CAAiBxC,KAAjB,CAAA,CAAA;OAPgB;uBAAA;;KAAlB,CAAA,CAAA;EASA;;EAEG;;EACI,EAAA,OAAA,CAASyC,SAAT,GAAP,UAAiBC,QAAjB,EAAmE;EACjE,IAAA,IAAA,CAAKzC,OAAL,CAAA;;EACA,IAAA,IAAA,CAAKgC,QAAL,CAAcU,EAAd,CAAiB,QAAjB,EAA2BD,QAA3B,CAAA,CAAA;;EACA,IAAA,OAAO,IAAP,CAAA;KAHK,CAAA;EAKP;;EAEG;;;EACI,EAAA,OAAA,CAAWE,WAAX,GAAP,UAAmBF,QAAnB,EAAsE;EACpE,IAAA,IAAA,CAAKT,QAAL,CAAcY,GAAd,CAAkB,QAAlB,EAA4BH,QAA5B,CAAA,CAAA;;EACA,IAAA,OAAO,IAAP,CAAA;KAFK,CAAA;;EAIG,EAAA,OAAA,CAAWF,WAAX,GAAV,UAAsBxC,KAAtB,EAAkC;MAChC,IAAM8C,SAAS,GAAG,IAAA,CAAKX,QAAvB,CAAA;EACA,IAAA,IAAMY,QAAQ,GAAG/C,KAAK,KAAK8C,SAA3B,CAAA;MAEA,IAAKX,CAAAA,QAAL,GAAgBnC,KAAhB,CAAA;;EAEA,IAAA,IAAI+C,QAAJ,EAAc;QACZ,IAAKd,CAAAA,QAAL,CAAce,OAAd,CAAsB,QAAtB,EAAgChD,KAAhC,EAAuC8C,SAAvC,CAAA,CAAA;EACD,KAAA;KARO,CAAA;EAUV;;EAEG;;;IACI,OAAAG,CAAAA,QAAA,GAAP,YAAA;EACE,IAAA,OAAO,EAAGC,CAAAA,MAAH,CAAG,IAAA,CAAKjD,OAAR,CAAP,CAAA;KADK,CAAA;EAGP;;EAEG;;;IACI,OAAAkD,CAAAA,OAAA,GAAP,YAAA;EACE,IAAA,OAAO,KAAKlD,OAAZ,CAAA;KADK,CAAA;;EAGT,EAAA,OAAC+B,QAAD,CAAA;EAAC,CA1DD,EAAA;;ECTA;;;EAGG;;EACH,IAAAoB,gBAAA;EAAA;EAAA,UAAAC,MAAA,EAAA;EAAyCC,EAAAA,SAAW,CAAAF,gBAAA,EAAAC,MAAA,CAAX,CAAA;EAEvC;;;;EAIG;;;IACH,SAAAD,gBAAA,CAAoBG,iBAApB,EAA8C;MAA9C,IAAAC,KAAA,GACEH,WAAA,KAAA,KAGD,IAJD,CAAA;;MAAoBG,KAAiB,CAAAD,iBAAjB,GAAAA,iBAAA,CAAA;MANZC,KAAW,CAAAC,WAAX,GAAoC,EAApC,CAAA;;MA4BAD,KAAA,CAAAE,cAAA,GAAiB,YAAA;EACvBF,MAAAA,KAAI,CAAChB,WAAL,CAAiBgB,KAAI,CAACvD,OAAtB,CAAA,CAAA;OADM,CAAA;;EAnBNuD,IAAAA,KAAI,CAACrB,QAAL,GAAgBqB,KAAI,CAACvD,OAArB,CAAA;;EACD,GAAA;;EAXH,EAAA,IAAA,OAAA,GAAA,gBAAA,CAAA,SAAA,CAAA;EAaElB,EAAAA,MAAA,CAAAqD,cAAA,CAAW,OAAA,EAAA,SAAX,EAAW;EAAXC,IAAAA,GAAA,EAAA,YAAA;QAAA,IAcCmB,KAAA,GAAA,IAdD,CAAA;;QACEjC,kBAAkB,CAAC,IAAD,CAAlB,CAAA;;EACA,MAAA,IAAMvB,KAAK,GAAG,IAAKuD,CAAAA,iBAAL,EAAd,CAAA;;QACA,IAAMI,OAAO,GAAG7B,qBAAqB,EAArC,CAAA;;EAEA,MAAA,IAAA,CAAK2B,WAAL,CAAiBnD,OAAjB,CAAyB,UAAAsB,QAAA,EAAQ;EAC/BA,QAAAA,QAAQ,CAACgB,WAAT,CAAqBY,KAAI,CAACE,cAA1B,CAAA,CAAA;SADF,CAAA,CAAA;;EAGAC,MAAAA,OAAO,CAAClC,SAAR,CAAkBnB,OAAlB,CAA0B,UAAAsB,QAAA,EAAQ;EAChCA,QAAAA,QAAQ,CAACa,SAAT,CAAmBe,KAAI,CAACE,cAAxB,CAAA,CAAA;SADF,CAAA,CAAA;EAGA,MAAA,IAAA,CAAKD,WAAL,GAAmBE,OAAO,CAAClC,SAA3B,CAAA;EAEA,MAAA,OAAOzB,KAAP,CAAA;OAbS;uBAAA;;KAAX,CAAA,CAAA;EAmBF,EAAA,OAACoD,gBAAD,CAAA;EAhCA,CAAA,CAAyCpB,QAAzC,CAAA;;ECZA;;;;EAIG;;EAIH,SAAS4B,aAAT,CAAuBxD,SAAvB,EAAuCC,UAAvC,EAA2DwD,UAA3D,EAAkF;EAAvB,EAAA,IAAAA,UAAA,KAAA,KAAA,CAAA,EAAA;EAAAA,IAAAA,UAAuB,GAAAxD,UAAvB,CAAA;EAAuB,GAAA;;EAChF,EAAA,IAAMyD,cAAc,GAAuB;EACzCC,IAAAA,YAAY,EAAE,IAD2B;EAEzC1B,IAAAA,GAAG,EAAE,YAAA;EACH,MAAA,OAAO2B,WAAW,CAAC,IAAD,EAAOH,UAAP,CAAX,CAA8B5D,OAArC,CAAA;OAHuC;MAKzCsC,GAAG,EAAE,UAAUvC,KAAV,EAAoB;QACvBgE,WAAW,CAAC,IAAD,EAAOH,UAAP,EAAmB7D,KAAnB,CAAX,CAAqCC,OAArC,GAA+CD,KAA/C,CAAA;EACD,KAAA;KAPH,CAAA;EASAjB,EAAAA,MAAM,CAACqD,cAAP,CAAsBhC,SAAtB,EAAiCC,UAAjC,EAA6CyD,cAA7C,CAAA,CAAA;;IACA,IAAID,UAAU,KAAKxD,UAAnB,EAA+B;EAC7BtB,IAAAA,MAAM,CAACqD,cAAP,CAAsBhC,SAAtB,EAAiCyD,UAAjC,EAA6C;EAC3CE,MAAAA,YAAY,EAAE,IAD6B;EAE3C1B,MAAAA,GAAG,EAAE,YAAA;EACH,QAAA,OAAO2B,WAAW,CAAC,IAAD,EAAOH,UAAP,CAAX,CAA8B5D,OAArC,CAAA;EACD,OAAA;OAJH,CAAA,CAAA;EAMD,GAAA;EACF,CAAA;EAID;;;;;;;;;;;;;;;;;;;;;;;EAuBG;;;WACagE,UAAO;IAAC,IAAczD,IAAA,GAAA,EAAd,CAAA;;SAAA,IAAcC,EAAA,GAAA,GAAdA,EAAc,GAAAC,SAAA,CAAAC,QAAdF,EAAc,IAAA;EAAdD,IAAAA,IAAc,CAAAC,EAAA,CAAd,GAAcC,SAAA,CAAAD,EAAA,CAAd,CAAA;;;EACtB,EAAA,IAAID,IAAI,CAACG,MAAL,GAAc,CAAlB,EAAqB;MACnB,OAAOiD,aAAa,CAACpD,IAAI,CAAC,CAAD,CAAL,EAAUA,IAAI,CAAC,CAAD,CAAd,CAApB,CAAA;EACD,GAAA;;EAED,EAAA,OAAO,UAACJ,SAAD,EAAiBC,UAAjB,EAAwC;MAAA,OAAAuD,aAAa,CAACxD,SAAD,EAAYC,UAAZ,EAAwBG,IAAI,CAAC,CAAD,CAA5B,CAAb,CAAA;KAA/C,CAAA;EACD,CAAA;EAKD;;EAEG;;WACa0D,WAAQ;IAAC,IAAc1D,IAAA,GAAA,EAAd,CAAA;;SAAA,IAAcC,EAAA,GAAA,GAAdA,EAAc,GAAAC,SAAA,CAAAC,QAAdF,EAAc,IAAA;EAAdD,IAAAA,IAAc,CAAAC,EAAA,CAAd,GAAcC,SAAA,CAAAD,EAAA,CAAd,CAAA;;;IACvB,OAAOwD,OAAO,CAAInD,KAAX,CAAW,KAAA,CAAX,EAAWN,IAAX,CAAP,CAAA;EACD;;ECvED;;;;EAIG;EAIH;;EAEG;;EACG,SAAU2D,uBAAV,CAAkCC,MAAlC,EAA6D;IACjEA,MAAM,CAAC,WAAD,CAAN,GAAsB,UAAU7D,IAAV,EAAwBmC,QAAxB,EAAsD;EAC1E,IAAA,IAAA,CAAKnC,IAAL,CAAA,CAAA;MACAyD,WAAW,CAAC,IAAD,EAAOzD,IAAP,CAAX,CAAwBkC,SAAxB,CAAkCC,QAAlC,CAAA,CAAA;KAFF,CAAA;;IAIA0B,MAAM,CAAC,aAAD,CAAN,GAAwB,UAAU7D,IAAV,EAAyBmC,QAAzB,EAAwD;MAAxD,IAWvBc,KAAA,GAAA,IAXuB,CAAA;;MACtB,IAAI,CAACjD,IAAL,EAAW;QACT1B,IAAI,CAACwF,YAAY,CAAC,IAAD,CAAb,CAAJ,CAAyB/D,OAAzB,CAAiC,UAACgE,YAAD,EAAa;UAC5Cd,KAAI,CAACZ,WAAL,CAAiB0B,YAAjB,CAAA,CAAA;SADF,CAAA,CAAA;EAGA,MAAA,OAAA;EACD,KAAA;;EACD,IAAA,IAAI,EAAE/D,IAAI,IAAI,IAAV,CAAJ,EAAqB;EACnB,MAAA,OAAA;EACD,KAAA;;MACDyD,WAAW,CAAC,IAAD,EAAOzD,IAAP,CAAX,CAAwBqC,WAAxB,CAAoCF,QAApC,CAAA,CAAA;KAVF,CAAA;EAYD,CAAA;EAGD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAkCG;;EACG,SAAU6B,iBAAV,CAA4BC,WAA5B,EAA4C;EAChD,EAAA,IAAMpE,SAAS,GAAGoE,WAAW,CAACpE,SAA9B,CAAA;IAEA+D,uBAAuB,CAAC/D,SAAD,CAAvB,CAAA;EACD;;ECtED;;;;EAIG;;EA2CH,SAASqE,kBAAT,CACEC,KADF,EAEEvF,GAFF,EAEe;IAEb,IAAMyB,MAAM,GAAGnB,UAAU,CAACiF,KAAD,CAAV,GAAoBA,KAAK,EAAzB,GAA8BA,KAA7C,CAAA;IACA,IAAMC,cAAc,GAAwB,EAA5C,CAAA;IAEAC,eAAe,CAACD,cAAD,CAAf,CAAA;IACA9F,IAAI,CAAC+B,MAAD,CAAJ,CAAaN,OAAb,CAAqB,UAACC,IAAD,EAAU;EAC7B,IAAA,IAAMP,KAAK,GAAGY,MAAM,CAACL,IAAD,CAApB,CAAA;;EAEA,IAAA,IAAIsE,UAAU,CAAC7E,KAAD,CAAd,EAAuB;EACrB8E,MAAAA,WAAW,CAACH,cAAD,EAAiBpE,IAAjB,EAAuBP,KAAvB,CAAX,CAAA;EACD,KAFD,MAEO;QACL8E,WAAW,CAACH,cAAD,EAAiBpE,IAAjB,EAAuBwE,OAAO,CAAC/E,KAAD,CAA9B,CAAX,CAAA;EACD,KAAA;;EACDiE,IAAAA,OAAO,CAAC1D,IAAD,CAAP,CAAcoE,cAAd,EAA8BpE,IAA9B,CAAA,CAAA;KARF,CAAA,CAAA;IAWA4D,uBAAuB,CAACQ,cAAD,CAAvB,CAAA;EACA,EAAA,OAAOA,cAAP,CAAA;EACD,CAAA;EAED;;;;;;;;;;;;;;;;;;;EAmBG;;;EACG,SAAUK,QAAV,CACJN,KADI,EAC8C;EAElD,EAAA,OAAOD,kBAAkB,CAACC,KAAD,CAAzB,CAAA;EACD,CAAA;EAED;;;;;;;;;;;;;;;;;;;;;EAqBG;;EACG,SAAUO,eAAV,CACJP,KADI,EAC8C;IAElD,OAAOD,kBAAkB,CAACC,KAAD,CAAzB,CAAA;EACD,CAAA;EAED;;;;;;;;;;;;;;;EAeG;;EACG,SAAUK,OAAV,CAAwBG,YAAxB,EAA2C;EAC/C,EAAA,OAAO,IAAIlD,QAAJ,CAAmBkD,YAAnB,CAAP,CAAA;EACD,CAAA;EAED;;EAEG;;EACG,SAAUC,QAAV,CAAyBC,gBAAzB,EAAqD;EACzD,EAAA,OAAO,IAAIhC,gBAAJ,CAAqBgC,gBAArB,CAAP,CAAA;EACD;;ECrJD;;;;EAIG;EAQH;;EAEG;;EACa,SAAAC,mBAAA,CAIdC,GAJc,EAIMnF,OAJN,EAIgC;IAC9C,IAAMrB,GAAG,GAAqB,EAA9B,CAAA;;IAEA,IAAI,CAACqB,OAAL,EAAc;EACZ,IAAA,OAAOrB,GAAP,CAAA;EACD,GAAA;;EAEDqB,EAAAA,OAAO,CAACG,OAAR,CAAgB,UAAAC,IAAA,EAAI;EAClBzB,IAAAA,GAAG,CAACyB,IAAD,CAAH,GAAY,YAAA;QAAU,IAAcC,IAAA,GAAA,EAAd,CAAA;;aAAA,IAAcC,EAAA,GAAA,GAAdA,EAAc,GAAAC,SAAA,CAAAC,QAAdF,EAAc,IAAA;EAAdD,QAAAA,IAAc,CAAAC,EAAA,CAAd,GAAcC,SAAA,CAAAD,EAAA,CAAd,CAAA;;;QACpB,IAAMR,OAAO,GAAQqF,GAAG,CAACrF,OAAJ,IAAeqF,GAAG,CAACtF,KAAxC,CAAA;QAEA,OAAOC,OAAO,CAACM,IAAD,CAAP,MAAA,CAAAN,OAAA,EAAiBO,IAAjB,CAAP,CAAA;OAHF,CAAA;KADF,CAAA,CAAA;EAOA,EAAA,OAAO1B,GAAP,CAAA;EACD,CAAA;EAED;;EAEG;;EACG,SAAU8F,eAAV,CAA0BW,QAA1B,EAAuC;IAC3C,IAAM9D,SAAS,GAAkC,EAAjD,CAAA;EAEA1C,EAAAA,MAAM,CAACqD,cAAP,CAAsBmD,QAAtB,EAAgCxE,cAAhC,EAAgD;EAC9CsB,IAAAA,GAAG,EAAA,YAAA;EACD,MAAA,OAAOZ,SAAP,CAAA;EACD,KAAA;KAHH,CAAA,CAAA;EAMA,EAAA,OAAOA,SAAP,CAAA;EACD,CAAA;EAED;;EAEG;;EACa,SAAA4C,YAAA,CAAakB,QAAb,EAA4BC,UAA5B,EAAgD;;;EAC9D,EAAA,IAAI,CAACD,QAAQ,CAACxE,cAAD,CAAb,EAA+B;MAC7B6D,eAAe,CAACW,QAAD,CAAf,CAAA;EACD,GAAA;;EACD,EAAA,IAAM9D,SAAS,GAAG8D,QAAQ,CAACxE,cAAD,CAA1B,CAAA;;IAEA,IAAI,CAACyE,UAAL,EAAiB;MACf,IAAMC,YAAY,GAAG,CAAAC,EAAA,GAAA,CAAA7E,EAAA,GAAA0E,QAAQ,SAAR,IAAAA,QAAQ,KAAA,KAAA,CAAR,GAAQ,KAAA,CAAR,GAAAA,QAAQ,CAAEI,WAAV,MAAuB,IAAvB,IAAuB9E,EAAA,KAAA,KAAA,CAAvB,GAAuB,KAAA,CAAvB,GAAuBA,EAAA,CAAAT,SAAvB,MAAmC,IAAnC,IAAmCsF,EAAA,KAAA,KAAA,CAAnC,GAAmC,KAAA,CAAnC,GAAmCA,EAAA,CAAA1E,aAAA,CAAxD,CAAA;;EAEA,IAAA,IAAIyE,YAAJ,EAAkB;EAChBA,MAAAA,YAAY,CAACnF,OAAb,CAAqB,UAAAC,IAAA,EAAI;UACvB,IAAI,EAAEA,IAAI,IAAIkB,SAAV,KAAwBlB,IAAI,IAAIgF,QAApC,EAA8C;YAC5CA,QAAQ,CAAChF,IAAD,CAAR,CAAA;EACD,SAAA;SAHH,CAAA,CAAA;EAKD,KAAA;EACF,GAAA;;EACD,EAAA,OAAOkB,SAAP,CAAA;EACD,CAAA;EAED;;EAEG;;WACauC,YAAYuB,UAAehF,MAAc2E,cAAkB;EACzE,EAAA,IAAMzD,SAAS,GAAG4C,YAAY,CAACkB,QAAD,CAA9B,CAAA;;EAEA,EAAA,IAAI,CAAC9D,SAAS,CAAClB,IAAD,CAAd,EAAsB;EACpBkB,IAAAA,SAAS,CAAClB,IAAD,CAAT,GAAkBwE,OAAO,CAACG,YAAD,CAAzB,CAAA;EACD,GAAA;;IACD,OAAOzD,SAAS,CAAClB,IAAD,CAAhB,CAAA;EACD,CAAA;EAED;;EAEG;;WACauE,YAAYS,UAAehF,MAAcqB,UAAuB;EAC9E,EAAA,IAAMH,SAAS,GAAG4C,YAAY,CAACkB,QAAD,CAA9B,CAAA;EAEA9D,EAAAA,SAAS,CAAClB,IAAD,CAAT,GAAkBqB,QAAlB,CAAA;EACD,CAAA;EAED;;;EAGG;;EACG,SAAUiD,UAAV,CAAqBtF,GAArB,EAA6B;EACjC,EAAA,OAAOA,GAAG,IAAIC,QAAQ,CAACD,GAAD,CAAf,IAAwB,SAAaA,IAAAA,GAArC,IAA4C,WAAA,IAAeA,GAA3D,IAAkE,iBAAiBA,GAA1F,CAAA;EACD,CAAA;EAED;;;EAGG;;EACG,SAAUqG,UAAV,CAAqBrG,GAArB,EAA6B;EACjC,EAAA,OAAOA,GAAG,IAAI,CAACsF,UAAU,CAACtF,GAAD,CAAlB,IAA2B,WAAeA,IAAAA,GAA1C,IAAiD,aAAA,IAAiBA,GAAzE,CAAA;EACD;;EC/FD;;;EAGG;;EACa,SAAAsG,aAAA,CAMdC,OANc,EAM0DC,KAN1D,EAM6E;EAC3F,EAAA,IAAMC,aAAa,GAA6DvG,UAAU,CAACqG,OAAD,CAAV,GAAsB;EACpGpB,IAAAA,KAAK,EAAEoB,OAAAA;EAD6F,GAAtB,GAE5EA,OAFJ,CAAA;;EAIA,EAAA,SAASG,QAAT,GAAiB;;;MACf,OAAO,CAAAC,EAAA,GAAA,MAAA,CAAArF,EAAA,GAAAkF,KAAK,SAAL,IAAAA,KAAK,KAAA,KAAA,CAAL,GAAK,KAAA,CAAL,GAAAA,KAAK,EAAL,MAAa,IAAb,IAAalF,EAAA,KAAA,KAAA,CAAb,GAAaA,EAAb,GAAa,CAAA6E,EAAA,GAAAM,aAAa,CAACD,KAAd,MAAuB,IAAvB,IAAuBL,EAAA,KAAA,KAAA,CAAvB,GAAuB,KAAA,CAAvB,GAAuBA,EAAA,CAAAS,IAAA,CAAAH,aAAA,CAApC,MAAoC,IAApC,IAAoCI,EAAA,KAAA,KAAA,CAApC,GAAoCA,EAApC,GAAwC,CAAAC,EAAA,GAAAL,aAAa,CAACM,IAAd,MAAkB,IAAlB,IAAkBD,EAAA,KAAA,KAAA,CAAlB,GAAkB,KAAA,CAAlB,GAAkBA,EAAA,CAAAF,IAAA,CAAAH,aAAA,CAA1D,MAAkE,IAAlE,IAAkEE,EAAA,KAAA,KAAA,CAAlE,GAAkEA,EAAlE,GAAkE,EAAzE,CAAA;EACD,GAAA;;EAED,EAAA,IAAMK,YAAY,GAAG,IAAIrE,SAAJ,EAArB,CAAA;IACA,IAAMsE,YAAY,GAAyE,EAA3F,CAAA;IACA,IAAMC,SAAS,GAAsD,EAArE,CAAA;IACA,IAAMC,YAAY,GAAsD,EAAxE,CAAA;IACA,IAAMC,OAAO,GAAqK,EAAlL,CAAA;EACA,EAAA,IAAMC,WAAW,GAAkB;EAAE3G,IAAAA,OAAO,EAAE,IAAA;KAA9C,CAAA;IACA,IAAI4G,YAAY,GAA6B,EAA7C,CAAA;IACA,IAAIC,YAAY,GAAiB,IAAjC,CAAA;IACA,IAAIC,UAAU,GAA8B,EAA5C,CAAA;IACA,IAAIC,WAAW,GAAuB,EAAtC,CAAA;;EAGA,EAAA,IAAMC,SAAS,GAAG,UAACvE,QAAD,EAAwE;MACxF8D,YAAY,CAAC7E,IAAb,CAAkBe,QAAlB,CAAA,CAAA;KADF,CAAA;;EAGA,EAAA,IAAMwE,MAAM,GAAG,UAACxE,QAAD,EAAqD;MAClE+D,SAAS,CAAC9E,IAAV,CAAee,QAAf,CAAA,CAAA;KADF,CAAA;;EAGA,EAAA,IAAMyE,SAAS,GAAG,UAACzE,QAAD,EAAqD;MACrEgE,YAAY,CAAC/E,IAAb,CAAkBe,QAAlB,CAAA,CAAA;KADF,CAAA;;EAGA,EAAA,IAAMC,EAAE,GAAG,UAACD,QAAD,EAAoK;MAC7KiE,OAAO,CAAChF,IAAR,CAAae,QAAb,CAAA,CAAA;KADF,CAAA;;EAGA,EAAA,IAAM0E,IAAI,GAAG,UAAqCC,SAArC,EAAyD;MAAE,IAAgDC,MAAA,GAAA,EAAhD,CAAA;;WAAA,IAAgD7G,EAAA,GAAA,GAAhDA,EAAgD,GAAAC,SAAA,CAAAC,QAAhDF,EAAgD,IAAA;QAAhD6G,MAAgD,CAAA7G,EAAA,GAAA,CAAA,CAAhD,GAAgDC,SAAA,CAAAD,EAAA,CAAhD,CAAA;;;EACtE8F,IAAAA,YAAY,CAACvD,OAAb,CAAAlC,KAAA,CAAAyF,YAAA,iBAAqBc,YAAcC,QAAQ,MAA3C,CAAA,CAAA;KADF,CAAA;;EAIA,EAAA,IAAMC,eAAe,GAAG,UAACC,KAAD,EAAa;EACnCV,IAAAA,YAAY,GAAGU,KAAf,CAAA;KADF,CAAA;;EAGA,EAAA,IAAMC,SAAS,GAAG,UAACC,MAAD,EAAkC;EAClDX,IAAAA,UAAU,GAAGW,MAAb,CAAA;KADF,CAAA;;EAGA,EAAA,IAAMC,UAAU,GAAG,UAACxH,OAAD,EAA4B;EAC7C6G,IAAAA,WAAW,GAAG7G,OAAd,CAAA;KADF,CAAA;;IAIA,IAAI6F,aAAa,CAACtB,KAAlB,EAAyB;EACvBkC,IAAAA,WAAW,CAAC3G,OAAZ,GAAsB+F,aAAa,CAACtB,KAAd,CAAoB;EACxCuB,MAAAA,QAAQ,EAAAA,QADgC;EAExCsB,MAAAA,eAAe,EAAAA,eAFyB;EAGxCE,MAAAA,SAAS,EAAAA,SAH+B;EAIxCE,MAAAA,UAAU,EAAAA,UAJ8B;EAKxCV,MAAAA,SAAS,EAAAA,SAL+B;EAMxCE,MAAAA,SAAS,EAAAA,SAN+B;EAOxCD,MAAAA,MAAM,EAAAA,MAPkC;EAQxCE,MAAAA,IAAI,EAAAA,IARoC;EASxCzE,MAAAA,EAAE,EAAAA,EAAAA;EATsC,KAApB,KAUhB,IAVN,CAAA;EAWD,GAAA;;IAED,IAAIqD,aAAa,CAAC4B,OAAlB,EAA2B;MACzBhB,WAAW,CAAC3G,OAAZ,GAAsB+F,aAAa,CAAC4B,OAAd,CAAsB3B,QAAQ,EAA9B,CAAA,IAAqC,IAA3D,CAAA;EACD,GAAA;;IAED,IAAID,aAAa,CAAC0B,MAAlB,EAA0B;EACxBD,IAAAA,SAAS,CAACzB,aAAa,CAAC0B,MAAf,CAAT,CAAA;EACD,GAAA;;IACD,IAAI1B,aAAa,CAACwB,KAAlB,EAAyB;EACvBD,IAAAA,eAAe,CAACvB,aAAa,CAACwB,KAAf,CAAf,CAAA;EACD,GAAA;;IACD,IAAIxB,aAAa,CAAC7F,OAAlB,EAA2B;EACzBwH,IAAAA,UAAU,CAAC3B,aAAa,CAAC7F,OAAf,CAAV,CAAA;EACD,GAAA;;IACD,IAAI6F,aAAa,CAAC6B,OAAlB,EAA2B;EACzBZ,IAAAA,SAAS,CAACjB,aAAa,CAAC6B,OAAf,CAAT,CAAA;EACD,GAAA;;IACD,IAAI7B,aAAa,CAAC8B,OAAlB,EAA2B;EACzBpB,IAAAA,YAAY,CAAC/E,IAAb,CAAkBqE,aAAa,CAAC8B,OAAhC,CAAA,CAAA;EACD,GAAA;;IACD,IAAI9B,aAAa,CAAC+B,IAAlB,EAAwB;EACtBtB,IAAAA,SAAS,CAAC9E,IAAV,CAAeqE,aAAa,CAAC+B,IAA7B,CAAA,CAAA;EACD,GAAA;;IACD,IAAI/B,aAAa,CAACrD,EAAlB,EAAsB;MACpBgE,OAAO,CAAChF,IAAR,CAAa,UAAC4D,QAAD,EAAW8B,SAAX,EAAsBW,QAAtB,EAA8B;QACzC,IAAMnF,GAAG,GAAGmD,aAAa,CAACrD,EAAd,CAAkB4C,QAAlB,EAA4B8B,SAA5B,EAAuCW,QAAvC,CAAZ,CAAA;EAEA,MAAA,OAAO,YAAA;;;UACLnF,GAAG,IAAIA,GAAG,EAAV,CAAA;UACA,CAAAhC,EAAA,GAAAmF,aAAa,CAACnD,GAAd,MAAoB,IAApB,IAAoBhC,EAAA,KAAA,KAAA,CAApB,GAAoB,KAAA,CAApB,GAAoBA,EAAA,CAAAsF,IAAA,CAAAH,aAAA,EAAAT,QAAA,EAAU8B,SAAV,EAAqBW,QAArB,CAApB,CAAA;SAFF,CAAA;OAHF,CAAA,CAAA;EAQD,GAAA;;IAED,OAAO;EACLN,IAAAA,MAAM,EAAE,YAAA;EAAM,MAAA,OAAAX,UAAA,CAAA;OADT;EAELS,IAAAA,KAAK,EAAL,YAAA;EACE,MAAA,IAAMS,IAAI,GAAGrB,WAAW,CAAC3G,OAAzB,CAAA;;EAEA,MAAA,IAAI6G,YAAJ,EAAkB;EAChB,QAAA,OAAOA,YAAP,CAAA;EACD,OAAA;;EACD,MAAA,IAAImB,IAAJ,EAAU;EACR,QAAA,IAAMC,WAAS,GAAG7D,YAAY,CAAC4D,IAAD,CAA9B,CAAA;EAEAV,QAAAA,eAAe,CAAC1I,IAAI,CAACqJ,WAAD,CAAJ,CAAgBC,MAAhB,CAAuB,UAACC,IAAD,EAAOC,GAAP,EAAU;YAC/CD,IAAI,CAACC,GAAD,CAAJ,GAAYH,WAAS,CAACG,GAAD,CAAT,CAAepI,OAA3B,CAAA;EACA,UAAA,OAAOmI,IAAP,CAAA;WAFc,EAGb,EAHa,CAAD,CAAf,CAAA;EAID,OAAA;;QACD,OAAOtB,YAAY,IAAI,EAAvB,CAAA;OAhBG;EAkBLvB,IAAAA,QAAQ,EAAA,YAAA;QACN,OAAOqB,WAAW,CAAC3G,OAAnB,CAAA;OAnBG;EAqBL4H,IAAAA,OAAO,EAAP,YAAA;QACE,IAAM9B,KAAK,GAAGE,QAAQ,EAAtB,CAAA;EAEAO,MAAAA,YAAY,CAAClG,OAAb,CAAqB,UAAAgI,IAAA,EAAI;EACvB1B,QAAAA,WAAW,CAAC3G,OAAZ,GAAsBqI,IAAI,CAACvC,KAAD,EAAQa,WAAW,CAAC3G,OAApB,CAAJ,IAAoC2G,WAAW,CAAC3G,OAAtE,CAAA;SADF,CAAA,CAAA;OAxBG;EA6BL8H,IAAAA,IAAI,EAAJ,YAAA;EACE;EACA,MAAA,IAAMxC,QAAQ,GAAGqB,WAAW,CAAC3G,OAA7B,CAAA;QACA,IAAM8F,KAAK,GAAGE,QAAQ,EAAtB,CAAA;EAEAY,MAAAA,YAAY,GAAIE,UAAuB,CAACwB,GAAxB,CAA4B,UAAAlB,SAAA,EAAS;UACnD,IAAMW,QAAQ,GAAG,YAAA;;;YAAC,IAAgBV,MAAA,GAAA,EAAhB,CAAA;;iBAAA,IAAgB7G,EAAA,GAAA,GAAhBA,EAAgB,GAAAC,SAAA,CAAAC,QAAhBF,EAAgB,IAAA;EAAhB6G,YAAAA,MAAgB,CAAA7G,EAAA,CAAhB,GAAgBC,SAAA,CAAAD,EAAA,CAAhB,CAAA;;;EAChB,UAAA,CAAAI,EAAA,GAAC0F,YAAD,EAAsBvD,OAAtB,CAA8BlC,KAA9B,CAA8BD,EAA9B,EAA8B2H,aAAA,CAAA,CAAAnB,SAAA,CAAA,EAAcC,MAAd,EAAsB,KAAtB,CAA9B,CAAA,CAAA;WADF,CAAA;;EAIA,QAAA,IAAM/B,QAAQ,GAAGqB,WAAW,CAAC3G,OAA7B,CAAA;EAEA,QAAA,OAAO0G,OAAO,CAAC4B,GAAR,CAAY,UAAAD,IAAA,EAAQ;EAAA,UAAA,OAAAA,IAAI,CAAC/C,QAAD,EAAW8B,SAAX,EAAsBW,QAAtB,CAAJ,CAAA;EAA0C,SAA9D,CAAgES,CAAAA,MAAhE,CAAuEC,OAAvE,CAAP,CAAA;SAPc,CAAhB,CALF;;EAgBEjC,MAAAA,SAAS,CAACnG,OAAV,CAAkB,UAAAgI,IAAA,EAAI;EACpBA,QAAAA,IAAI,CAAC/C,QAAD,EAAWQ,KAAX,CAAJ,CAAA;SADF,CAAA,CAAA;OA7CG;EAiDL+B,IAAAA,OAAO,EAAP,YAAA;EACE;EACAjB,MAAAA,YAAY,CAACvG,OAAb,CAAqB,UAAAqI,QAAA,EAAQ;EAC3BA,QAAAA,QAAQ,CAACrI,OAAT,CAAiB,UAAAgI,IAAA,EAAI;YACnBA,IAAI,EAAA,CAAA;WADN,CAAA,CAAA;EAGD,OAJD,EAFF;;EASE/B,MAAAA,YAAY,CAAC1D,GAAb,EAAA,CAAA;EACA,MAAA,IAAM0C,QAAQ,GAAGqB,WAAW,CAAC3G,OAA7B,CAAA;QACA,IAAM8F,KAAK,GAAGE,QAAQ,EAAtB,CAAA;EAEAS,MAAAA,YAAY,CAACpG,OAAb,CAAqB,UAAAgI,IAAA,EAAI;EACvBA,QAAAA,IAAI,CAAC/C,QAAD,EAAWQ,KAAX,CAAJ,CAAA;SADF,CAAA,CAAA;OA9DG;EAkEL5F,IAAAA,OAAO,EAAP,YAAA;EACE,MAAA,OAAOkF,mBAAmB,CAAgBuB,WAAhB,EAA6BI,WAA7B,CAA1B,CAAA;OAnEG;EAqELrE,IAAAA,EAAE,EAAF,UAAG0E,SAAH,EAAsBW,QAAtB,EAA+D;EAC7DzB,MAAAA,YAAY,CAAC5D,EAAb,CAAgB0E,SAAhB,EAA2BW,QAA3B,CAAA,CAAA;OAtEG;EAwELnF,IAAAA,GAAG,EAAH,UAAIwE,SAAJ,EAAuBW,QAAvB,EAAgE;EAC9DzB,MAAAA,YAAY,CAAC1D,GAAb,CAAiBwE,SAAjB,EAA4BW,QAA5B,CAAA,CAAA;EACD,KAAA;KA1EH,CAAA;EA4ED;;EClMD;;;;EAIG;EAMH;;;;;;;;;;;;;;;;;;;;;;;;;;;;EA4BG;;WACaY,SAASxI,WAAgBC,YAAoBwI,YAA8B;EACzF,EAAA,IAAMxG,GAAG,GAAGwG,UAAU,CAACxG,GAAvB,CAAA;;EAEA,EAAA,SAASyG,WAAT,GAAoB;EAClB,IAAA,IAAMrH,SAAS,GAAG4C,YAAY,CAAC,IAAD,EAAO,IAAP,CAA9B,CAAA;;EAEA,IAAA,IAAI,EAAEhE,UAAU,IAAIoB,SAAhB,CAAJ,EAAgC;EAC9BA,MAAAA,SAAS,CAACpB,UAAD,CAAT,GAAwB8E,QAAQ,CAAC9C,GAAG,CAAC0G,IAAJ,CAAS,IAAT,CAAD,CAAhC,CAAA;EACD,KAAA;;EACD,IAAA,OAAO/E,WAAW,CAAC,IAAD,EAAO3D,UAAP,CAAX,CAA8BJ,OAArC,CAAA;EACD,GAAA;;EACD,EAAA,IAAM6D,cAAc,GAAuB;EACzCC,IAAAA,YAAY,EAAE,IAD2B;EAEzC1B,IAAAA,GAAG,EAAEyG,WAAAA;KAFP,CAAA;IAKA1I,SAAS,CAACY,aAAD,CAAT,KAAAZ,SAAS,CAACY,aAAD,CAAT,GAA6B,EAA7B,CAAA,CAAA;EACA,EAAA,IAAMyE,YAAY,GAAGrF,SAAS,CAACY,aAAD,CAA9B,CAAA;;IAEA,IAAIyE,YAAY,CAAC5D,OAAb,CAAqBxB,UAArB,CAAqC,KAAA,CAAC,CAA1C,EAA6C;MAC3CoF,YAAY,CAAC9D,IAAb,CAAkBtB,UAAlB,CAAA,CAAA;EACD,GAAA;;EACDtB,EAAAA,MAAM,CAACqD,cAAP,CAAsBhC,SAAtB,EAAiCC,UAAjC,EAA6CyD,cAA7C,CAAA,CAAA;EAEA,EAAA,OAAOA,cAAP,CAAA;EACD;;EChED;;;;EAIG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ECJH;;;;EAIG;;;;;;;;"}